<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/1.5.3/jspdf.debug.js"></script>

	<link rel="shortcut icon" type="image/x-icon" href="favicon.ico?">
	
    <title>Custom Brick Mosaic Generator</title>
	
    <style>
        .img-fluid{
            display: none;
        }

        canvas {
            background-color: #eeeeee; 
            width: 100%;
            height: auto;
        }

    </style>
</head>
<body>
    <div class="container-lg mt-3">
        <div class="row py-3">
			<h1>Custom Brick Mosaic Generator</h1>
        </div>
        <div class="row">
            <div class="col-md-4">
                <div class="row">
                    <label for="imageFile" class="form-label"><strong>1. Choose a source image (It will not be uploaded)</strong></label>
				</div>
				<div class="row pb-4 px-3">
					<input class="form-control mb-2" type="file" accept="image/*" id="imageFile" name="imageFile"><!--onchange="preview_image(event)"-->
					<img src="" class="img-thumbnail" alt="No image chosen" id="previewImg" hidden>
					<canvas id="thumbnailCanvas" width="480" height="480" style="border:1px solid #000000;" hidden>
						Sorry, your browser doesn't support the &lt;canvas&gt; element.
					</canvas>
					<div class="btn-group px-3 pt-1 " role="group" aria-label="cropOrScale" id="cropOrScaleImageBtnGroup" hidden>
					    <button type="button" class="btn btn-secondary pt-0 pb-0 active" id="cropCenterSquareButton">Crop center square</button>
						<button type="button" class="btn btn-secondary pt-0 pb-0" id="scaleToSquareButton">Resize to square</button>
					</div>
                </div>
                <div class="row pb-4">
					<label class="form-label"><strong>2. Select the size of the mosaic</strong></label>
					<div class="col mb-1 ps-3 pe-1">
						<div class="input-group input-group-sm">
							<span class="input-group-text">Width</span>
							<input type="number" class="form-control" id="widthInputValue" aria-label="MosaicWidth" placeholder="48" value="48">
						</div>
					</div>
					<div class="col mb-1 pe-3 ps-1">
						<div class="input-group input-group-sm">
							<span class="input-group-text">Height</span>
							<input type="number" class="form-control" id="heightInputValue" aria-label="MosaicHeight" placeholder="48" value="48">
						</div>
					</div>
					<p class="fw-light mb-0 px-4" id="requiredPartsString">Required parts: 2304</p>
                </div>
				<div class="row pb-4">
					<label for="partListGroup" class="form-label"><strong>3. Which brick sets do you have?</strong></label>
					<div class="form-group row mx-0 px-1">
						<div class="col-6">
							<label>The Beatles</label>
						</div>
						<div class="col-6">
							<div class="input-group mb-1">
								<button class="btn btn-secondary py-0" type="button" id="buttonMinusBeatles">-</button>
								<input type="text" class="form-control text-center py-0" id="inputBeatles" aria-label="numberOfBeatlesSet" placeholder="0" value="0">
								<button class="btn btn-secondary py-0" type="button" id="buttonPlusBeatles">+</button>
							</div>
						</div>
					</div>
					<div class="form-group row mx-0 px-1">
						<div class="col-6">
							<label>Marilyn Monroe</label>
						</div>
						<div class="col-6">
							<div class="input-group mb-1">
								<button class="btn btn-secondary py-0" type="button" id="buttonMinusMonroe">-</button>
								<input type="text" class="form-control text-center py-0" id="inputMonroe" aria-label="numberOfMonroeSet" placeholder="0" value="0">
								<button class="btn btn-secondary py-0" type="button" id="buttonPlusMonroe">+</button>
							</div>
						</div>
					</div>
					<div class="form-group row mx-0 px-1">
						<div class="col-6">
							<label>Iron Man</label>
						</div>
						<div class="col-6">
							<div class="input-group mb-1">
								<button class="btn btn-secondary py-0" type="button" id="buttonMinusIronMan">-</button>
								<input type="text" class="form-control text-center py-0" id="inputIronMan" aria-label="numberOfIronManSet" placeholder="0" value="0">
								<button class="btn btn-secondary py-0" type="button" id="buttonPlusIronMan">+</button>
							</div>
						</div>
					</div>
					<div class="form-group row mx-0 px-1">
						<div class="col-6">
							<label>The Sith</label>
						</div>
						<div class="col-6">
							<div class="input-group mb-1">
								<button class="btn btn-secondary py-0" type="button" id="buttonMinusSith">-</button>
								<input type="text" class="form-control text-center py-0" id="inputSith" aria-label="numberOfSithSet" placeholder="0" value="0">
								<button class="btn btn-secondary py-0" type="button" id="buttonPlusSith">+</button>
							</div>
						</div>
					</div>
					<div class="form-group row mx-0 px-1">
						<div class="col-6">
							<label>Hogwarts</label>
						</div>
						<div class="col-6">
							<div class="input-group mb-1">
								<button class="btn btn-secondary py-0" type="button" id="buttonMinusHogwarts">-</button>
								<input type="text" class="form-control text-center py-0" id="inputHogwarts" aria-label="numberOfHogwartsSet" placeholder="0" value="0">
								<button class="btn btn-secondary py-0" type="button" id="buttonPlusHogwarts">+</button>
							</div>
						</div>
					</div>
					<div class="form-group row mx-0 px-1">
						<div class="col-6">
							<label>Mickey Mouse</label>
						</div>
						<div class="col-6">
							<div class="input-group mb-1">
								<button class="btn btn-secondary py-0" type="button" id="buttonMinusMickey">-</button>
								<input type="text" class="form-control text-center py-0" id="inputMickey"aria-label="numberOfMickeySet" placeholder="0" value="0">
								<button class="btn btn-secondary py-0" type="button" id="buttonPlusMickey">+</button>
							</div>
						</div>
					</div>
					<div class="form-group row mx-0 px-1">
						<div class="col-6">
							<label>Personalized Portrait</label>
						</div>
						<div class="col-6">
							<div class="input-group mb-1">
								<button class="btn btn-secondary py-0" type="button" id="buttonMinusPortrait">-</button>
								<input type="text" class="form-control text-center py-0" id="inputPortrait"aria-label="numberOfPortraitSet" placeholder="0" value="0">
								<button class="btn btn-secondary py-0" type="button" id="buttonPlusPortrait">+</button>
							</div>
						</div>
					</div>
					<p class="fw-light mb-0 px-4" id="availablePartsString">Available parts: 0</p>
				</div>
                <div class="row">
					<label for="buttonCalculate" class="form-label"><strong>4. Run calculation</strong></label>
				</div>
				<div class="row pb-4 px-3">
					<div class="progress px-0"  style="height: 38px;" id="calculate-progress-container" hidden>
						<div class="progress-bar" id="calculate-progress-bar" role="progressbar" style="transition: none;"></div>
					</div>
					<button type="button mx-1" class="btn btn-primary" id="buttonCalculate" disabled>Calculate mosaic</button>
                </div>
                <div class="row">
					<label for="buttonDownload" class="form-label"><strong>5. Download instructions</strong></label>
				</div>
				<div class="row pb-5 mb-5 px-3">
					<div class="progress px-0" style="height: 38px;" id="pdf-progress-container" hidden>
						<div class="progress-bar" id="pdf-progress-bar" role="progressbar" style="transition: none;"></div>
					</div>
					<button type="button mx-1" class="btn btn-primary" id="buttonDownloadPDF" disabled>Generate and download instructions (pdf)</button>
				</div>
            </div>
            <div class="col-md-8 mb-5 pb-5">
                <label for="previewImg" class="form-label"><strong>Mosaic preview</strong></label>
                <canvas id="previewMosaicCanvas" width="800" height="800" style="border:1px solid #000000;">
                    Sorry, your browser doesn't support the &lt;canvas&gt; element.
                </canvas>
            </div>
        </div>
    </div>


    <!-- Bootstrap Bundle with Popper -->
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js" integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>
    <script src=".\brickMosaic.js"> </script>
    
</body>
</html>